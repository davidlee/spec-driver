deltas:
  DE-002:
    kind: delta
    status: completed
    name: Delta - Python package-level spec granularity
    slug: python-package-level-spec-granularity
    updated: '2025-11-02'
    path: change/deltas/DE-002-python-package-level-spec-granularity/DE-002.md
    applies_to:
      specs:
      - PROD-005
      requirements:
      - PROD-005.FR-001
      - PROD-005.FR-002
      - PROD-005.FR-003
      - PROD-005.FR-004
    relations:
    - type: satisfies
      target: PROD-005
      attributes:
        nature: Establishes Python package-level spec granularity pattern
    plan:
      id: IP-002
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-002
        delta: DE-002
        revision_links:
          aligns_with: []
        specs:
          primary:
          - PROD-005
          collaborators: []
        requirements:
          targets:
          - PROD-005.FR-001
          - PROD-005.FR-002
          - PROD-005.FR-003
          - PROD-005.FR-004
          dependencies: []
        phases:
        - id: IP-002.PHASE-01
          name: Phase 01 - Tooling & Validation
          objective: Implement package detection logic, validate deterministic ordering,
            audit registry for package-level support. Ensure foundation is sound before
            migration.
          entrance_criteria:
          - PROD-005 spec approved and synced
          - DE-002 delta created
          exit_criteria:
          - Package detection logic implemented and tested
          - Deterministic ordering validated across platforms
          - Registry audit complete with adaptation plan
          - VT-001 and VT-002 passing
        - id: IP-002.PHASE-02
          name: Phase 02 - Migration Execution
          objective: Delete file-level specs, generate package-level specs, update
            relationships, sync registry. Execute the breaking change cleanly.
          entrance_criteria:
          - Phase 01 complete
          - Tooling changes tested and validated
          exit_criteria:
          - All 101 file-level specs deleted
          - ~25-30 package-level specs created
          - Registry synced successfully
          - Validation passes with no errors
        - id: IP-002.PHASE-03
          name: Phase 03 - Verification & Documentation
          objective: Complete verification testing (VT-003, VT-004), update documentation,
            verify contract stability, confirm acceptance gates.
          entrance_criteria:
          - Phase 02 complete
          - Package-level specs synced and validated
          exit_criteria:
          - VT-003 and VT-004 passing
          - Documentation updated
          - VA-001 confirms zero spurious diffs
          - All acceptance gates met
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-002.PHASE-01
        plan: IP-002
        delta: DE-002
        name: Phase 01 - Tooling & Validation
        objective: Implement package detection logic, validate deterministic ordering,
          audit registry for package-level support. Ensure foundation is sound before
          migration.
        entrance_criteria:
        - PROD-005 spec approved and synced
        - DE-002 delta created
        - Research complete on existing codebase
        exit_criteria:
        - Package detection logic implemented and tested
        - Deterministic ordering validated across platforms
        - Registry audit complete with adaptation plan
        - VT-001 and VT-002 passing
        - VA-002 design review complete
      - schema: supekku.phase.overview
        version: 1
        phase: IP-002.PHASE-02
        plan: IP-002
        delta: DE-002
        name: Phase 02 - Migration Execution
        objective: Delete file-level specs, generate package-level specs, update relationships,
          sync registry. Execute the breaking change cleanly.
        entrance_criteria:
        - Phase 01 complete
        - Tooling changes tested and validated
        - 16 leaf packages identified
        exit_criteria:
        - All existing file-level specs deleted (if any)
        - 16 package-level specs created
        - Registry synced successfully
        - Validation passes with no errors
      - schema: supekku.phase.overview
        version: 1
        phase: IP-002.PHASE-03
        plan: IP-002
        delta: DE-002
        name: Phase 03 - Verification & Documentation
        objective: Complete verification testing (VT-003, VT-004), update documentation,
          verify contract stability, confirm acceptance gates.
        entrance_criteria:
        - Phase 02 complete
        - Package-level specs synced and validated
        - 16 package-level specs created (SPEC-110 to SPEC-125)
        exit_criteria:
        - VT-003 passing (integration test with package-level specs)
        - VT-004 passing (file-to-package resolution tests)
        - VA-001 complete (git diff stability analysis)
        - Documentation updated
        - All acceptance gates met
  DE-003:
    kind: delta
    status: completed
    name: Delta - CLI Integration for Frontmatter Schema Show Commands
    slug: cli-integration-for-frontmatter-schema-show-commands
    updated: '2025-11-02'
    path: change/deltas/DE-003-cli-integration-for-frontmatter-schema-show-commands/DE-003.md
    applies_to:
      specs:
      - PROD-004
      requirements:
      - PROD-004.FR-004
    relations:
    - type: implements
      target: PROD-004.FR-004
      attributes: {}
    plan:
      id: IP-003
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-003
        delta: DE-003
        revision_links:
          aligns_with: []
        specs:
          primary:
          - PROD-004
          collaborators: []
        requirements:
          targets: []
          dependencies: []
        phases:
        - id: IP-003.PHASE-01
          name: Phase 01 - Initial delivery
          objective: Deliver the foundational work for this delta.
          entrance_criteria: []
          exit_criteria: []
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-003.PHASE-01
        plan: IP-003
        delta: DE-003
        objective: Extend existing schema CLI commands to support all 16 frontmatter
          kinds with JSON Schema and YAML example output formats.
        entrance_criteria:
        - Frontmatter metadata registry accessible
        - Existing schema.py patterns understood
        exit_criteria:
        - All frontmatter kinds accessible via CLI
        - Comprehensive tests passing
        - Lint checks passing
        verification:
          tests:
          - supekku/cli/schema_test.py
          evidence:
          - 23 schema tests passing (8 new)
          - 78 total CLI tests passing
          - Ruff: 0 errors
          - Pylint: 9.67/10
        tasks:
        - Review existing CLI structure
        - Verify frontmatter registry
        - Extend list command for frontmatter
        - Extend show command for frontmatter
        - Add helper functions
        - Write comprehensive tests
        - Lint and manual testing
        risks: []
  DE-004:
    kind: delta
    status: draft
    name: Delta - Phase Management Implementation
    slug: phase-management-implementation
    updated: '2025-11-02'
    path: change/deltas/DE-004-phase-management-implementation/DE-004.md
    applies_to:
      specs:
      - PROD-006
      requirements:
      - PROD-006.FR-001
      - PROD-006.FR-002
      - PROD-006.FR-003
      - PROD-006.FR-004
      - PROD-006.FR-005
      - PROD-006.NF-001
      - PROD-006.NF-002
    plan:
      id: IP-004
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-004
        delta: DE-004
        revision_links:
          aligns_with: []
        specs:
          primary:
          - PROD-006
          collaborators: []
        requirements:
          targets:
          - PROD-006.FR-001
          - PROD-006.FR-002
          - PROD-006.FR-003
          - PROD-006.FR-004
          - PROD-006.FR-005
          - PROD-006.NF-001
          - PROD-006.NF-002
          dependencies: []
        phases:
        - id: IP-004.PHASE-01
          name: Phase 01 - Create Phase Command
          objective: Implement `create phase` command with auto-numbering, metadata
            population, and template rendering. Covers core phase creation logic.
          entrance_criteria:
          - DE-004 delta approved
          - PROD-006 spec reviewed
          exit_criteria:
          - create_phase() function implemented in creation.py
          - CLI command wired in cli/create.py
          - VT-PHASE-001, VT-PHASE-002, VT-PHASE-004 passing
          - Manual test: create phase for IP-002 works
        - id: IP-004.PHASE-02
          name: Phase 02 - Enhanced Display & Validation
          objective: Enhance delta display formatter to show phases. Add schema validation
            for phase.overview blocks during sync.
          entrance_criteria: &id001
          - Phase 01 complete
          - Phase creation working and tested
          exit_criteria: &id002
          - format_delta_details() shows phase summaries
          - Schema validation enforces phase.overview correctness
          - VT-PHASE-003, VT-PHASE-005 passing
          - Manual test: show delta DE-002 displays all phases
        - id: IP-004.PHASE-03
          name: Phase 03 - Verification & Polish
          objective: Complete verification artifacts (performance, UX review), ensure
            quality gates pass, update documentation.
          entrance_criteria: &id003
          - Phase 02 complete
          - All core functionality working
          exit_criteria: &id004
          - VA-PHASE-001 (performance) complete
          - VA-PHASE-002 (UX review) complete
          - All tests + linters passing
          - Documentation updated
        - id: IP-004.PHASE-04
          name: Phase 04 - Plan Metadata Auto-Update
          objective: Implement automatic plan frontmatter updates when creating phases,
            ensuring `show delta --json` reflects newly created phases immediately.
          entrance_criteria:
          - Phase 01 complete
          - Understanding of plan.overview block structure
          exit_criteria:
          - create_phase() updates plan.overview phases array
          - VT-PHASE-006 passing (plan metadata update tests)
          - Manual test - create phase updates JSON output
          - All tests + linters passing
        - id: IP-004.PHASE-05
          name: Phase 05 - Structured Progress Tracking
          objective: Implement phase.tracking@v1 YAML block for structured completion
            tracking of entrance/exit criteria and tasks, replacing regex-based progress
            parsing.
          entrance_criteria:
          - Phases 01, 02, 04 complete
          - User approval for structured tracking design
          exit_criteria:
          - phase.tracking@v1 schema defined
          - Parser/validator implemented
          - Formatter updated to use tracking data
          - Phase template includes tracking block
          - VT-PHASE-007 passing
          - Backward compatibility maintained
        - id: IP-004.PHASE-06
          name: Phase 06 - Schema Simplification & Verification
          objective: Simplify plan.overview schema to eliminate duplication (ID-only
            phases), add JSON schema for phase.tracking@v1, execute verification artifacts,
            and prepare DE-004 for completion.
          entrance_criteria:
          - Phases 01, 04, 05 complete (core functionality implemented)
          - All VT-PHASE tests passing (VT-001 through VT-007)
          - Duplication between plan.overview and phase.overview identified
          exit_criteria:
          - plan.overview schema simplified (phases array = ID-only objects)
          - create_phase writes only ID to plan.overview
          - Backward compatibility maintained for old format plans
          - phase.tracking@v1 has JSON schema support
          - VA-PHASE-001 and VA-PHASE-002 executed
          - IP-004.md migrated to simplified format
          - All tests passing, linters clean
          - Requirements registry updated with verification status
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-004.PHASE-01
        plan: IP-004
        delta: DE-004
        name: Phase 01 - Create Phase Command
        objective: Implement `create phase` command with auto-numbering, metadata
          population, and template rendering. Covers core phase creation logic.
        entrance_criteria:
        - DE-004 delta approved
        - PROD-006 spec reviewed
        exit_criteria:
        - create_phase() function implemented in creation.py
        - CLI command wired in cli/create.py
        - VT-PHASE-001, VT-PHASE-002, VT-PHASE-004 passing
        - Manual test - create phase for IP-002 works
        verification:
          tests:
          - VT-PHASE-001
          - VT-PHASE-002
          - VT-PHASE-004
          evidence:
          - Test output showing all tests passing
          - Manual test creating phase for IP-002
          - Lint output (ruff + pylint) passing
        tasks:
        - Implement create_phase() function
        - Add CLI command in create.py
        - Write comprehensive unit tests
        - Test with real implementation plan
        risks:
        - Phase numbering logic may be complex
        - Template rendering may need escaping
      - schema: supekku.phase.overview
        version: 1
        phase: IP-004.PHASE-04
        plan: IP-004
        delta: DE-004
        name: Phase 04 - Plan Metadata Auto-Update
        objective: Implement automatic plan frontmatter updates when creating phases,
          ensuring show delta --json reflects newly created phases immediately.
        entrance_criteria:
        - Phase 01 complete
        - Understanding of plan.overview block structure
        exit_criteria:
        - create_phase() updates plan.overview phases array
        - VT-PHASE-006 passing (plan metadata update tests)
        - Manual test - create phase updates JSON output
        - All tests + linters passing
        verification:
          tests:
          - VT-PHASE-006
          evidence:
          - Test output showing plan metadata update tests passing
          - Manual test showing phase in JSON output after creation
          - Lint output (ruff + pylint) passing
        tasks:
        - Research plan.overview block update pattern
        - Implement update_plan_metadata() helper function
        - Integrate into create_phase() function
        - Write VT-PHASE-006 tests
        - Manual verification with IP-002
        risks:
        - YAML block manipulation may be fragile
        - Race conditions if multiple phases created simultaneously
      - schema: supekku.phase.overview
        version: 1
        phase: IP-004.PHASE-05
        plan: IP-004
        delta: DE-004
        name: Phase 05 - Structured Progress Tracking
        objective: Implement phase.tracking@v1 YAML block for structured completion
          tracking of entrance/exit criteria and tasks, replacing regex-based progress
          parsing.
        entrance_criteria:
        - Phases 01, 02, 04 complete (core functionality working)
        - Understanding of existing phase.overview block structure
        - User approval for structured tracking design
        exit_criteria:
        - phase.tracking@v1 schema defined and documented
        - Parser/validator for tracking block implemented
        - Formatter updated to use structured data instead of regex
        - Phase template includes new tracking block
        - VT-PHASE-007 passing (tracking block tests)
        - Backward compatibility maintained (tracking block optional)
        verification:
          tests:
          - VT-PHASE-007
          evidence:
          - Test output showing tracking block parsing/validation
          - Manual test with phase-05.md tracking block
          - Backward compat test with existing phases (no tracking block)
        tasks:
        - Define phase.tracking@v1 schema
        - Implement parser and validator
        - Update formatter to use tracking data
        - Update phase template
        - Write comprehensive tests
        - Add migration guide for existing phases
        risks:
        - Breaking changes to existing phase files
        - Complex data structure may be harder to maintain manually
        - Need to support both tracking block and markdown checkboxes
      - schema: supekku.phase.overview
        version: 1
        phase: IP-004.PHASE-06
        plan: IP-004
        delta: DE-004
        objective: Simplify plan.overview schema to eliminate duplication (ID-only
          phases array), add JSON schema for phase.tracking@v1, execute verification
          artifacts, and prepare DE-004 for completion.
        entrance_criteria:
        - Phases 01, 04, 05 complete (core functionality implemented)
        - All VT-PHASE tests passing (VT-001 through VT-007)
        - phase.overview schema already registered and working
        exit_criteria:
        - phase.tracking@v1 has JSON schema with schema show support
        - VA-PHASE-001 executed (performance benchmark <2sec for 20 phases)
        - VA-PHASE-002 executed (UX review of delta display readability)
        - All acceptance criteria in DE-004 satisfied
        - Requirements registry updated with verification status
        verification:
          tests:
          - VA-PHASE-001
          - VA-PHASE-002
          evidence:
          - JSON schema for phase.tracking viewable via schema show
          - Performance benchmark results
          - UX review findings
          - Updated requirements registry
        tasks:
        - Research metadata-driven validation pattern for phase.tracking
        - Create JSON schema definition for phase.tracking@v1
        - Register schema in metadata system
        - Verify schema show phase.tracking works
        - Execute VA-PHASE-001 (performance benchmark)
        - Execute VA-PHASE-002 (UX review)
        - Update requirements registry with verification results
        - Update DE-004 with completion notes
        risks:
        - Metadata-driven validation migration may be complex
        - Performance may not meet <2sec threshold (mitigation: optimize if needed)
      - id: IP-004.PHASE-02
        name: Phase 02 - Enhanced Display & Validation
        objective: Enhance delta display formatter to show phases. Add schema validation
          for phase.overview blocks during sync.
        entrance_criteria: *id001
        exit_criteria: *id002
        phase: IP-004.PHASE-02
      - id: IP-004.PHASE-03
        name: Phase 03 - Verification & Polish
        objective: Complete verification artifacts (performance, UX review), ensure
          quality gates pass, update documentation.
        entrance_criteria: *id003
        exit_criteria: *id004
        phase: IP-004.PHASE-03
  DE-005:
    kind: delta
    status: completed
    name: Delta - implement spec backfill
    slug: implement-spec-backfill
    updated: '2025-11-02'
    path: change/deltas/DE-005-implement-spec-backfill/DE-005.md
    applies_to:
      specs:
      - PROD-007
      requirements:
      - PROD-007.FR-001
      - PROD-007.FR-002
      - PROD-007.FR-003
      - PROD-007.FR-004
      - PROD-007.NF-001
      - PROD-007.NF-002
    plan:
      id: IP-005
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-005
        delta: DE-005
        revision_links:
          aligns_with: []
        specs:
          primary:
          - PROD-007
          collaborators:
          - SPEC-110
          - SPEC-112
        requirements:
          targets:
          - PROD-007.FR-001
          - PROD-007.FR-002
          - PROD-007.FR-005
          - PROD-007.FR-006
          dependencies: []
        phases:
        - id: IP-005.PHASE-01
          name: Phase 01 - Core Implementation
          status: complete
          objective: 'Implement single-spec backfill: template retrieval, stub detection,
            completion logic, CLI command, and agent workflow. Batch mode deferred.'
          entrance_criteria:
          - PROD-007 complete and validated
          - Contracts generation working
          - SpecRegistry and template infrastructure confirmed
          exit_criteria:
          - show template command working
          - Stub detection tested and reliable
          - Single spec backfill E2E functional
          - All tests and linters passing
          evidence:
          - SPEC-125 completed successfully
          - SPEC-110 rewrite test
          - CONTRACT_REVIEW.md validation (17k tokens, 8 findings)
          - 17 unit tests passing
          - Both linters clean
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-005.PHASE-01
        plan: IP-005
        delta: DE-005
        objective: 'Implement simplified spec backfill: stub detection, CLI body replacement
          with template, and agent workflow. Agent handles intelligent completion.
          Batch mode deferred.'
        entrance_criteria:
        - PROD-007 complete and validated
        - Contracts generation working (via sync)
        - Task 1.1 (show template) complete
        exit_criteria:
        - Stub detection logic implemented and tested
        - CLI backfill command replaces body with template
        - Agent command workflow functional
        - End-to-end backfill demonstrated
        verification:
          tests:
          - VT-004
          - VT-005
          - VT-001
          evidence:
          - End-to-end workflow demonstration
          - Test suite passing
        tasks:
        - Implement stub detection (1.2)
        - Build CLI backfill command (1.4 - simplified)
        - Write agent command (1.5 - revised)
        - Integration testing (1.6)
        risks:
        - Stub detection false positives
        - Accidental overwrite of manual content
  DE-006:
    kind: delta
    status: completed
    name: Delta - Standardize CLI JSON output support
    slug: standardize-cli-json-output-support
    updated: '2025-11-02'
    path: change/deltas/DE-006-standardize-cli-json-output-support/DE-006.md
    applies_to:
      specs:
      - SPEC-003
      - SPEC-004
      requirements: []
    relations:
    - type: resolves
      target: ISSUE-007
      attributes:
        nature: Fixes inconsistent --json support across CLI commands
    plan:
      id: IP-006
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-006
        delta: DE-006
        revision_links:
          aligns_with: []
        specs:
          primary:
          - SPEC-003
          - SPEC-004
          - SPEC-006
          collaborators: []
        requirements:
          targets: []
          dependencies: []
        phases:
        - id: IP-006.PHASE-01
          name: Phase 01 - Add --json support to all CLI commands
          objective: Extend --json flag to create, list, and show commands with standardized
            output format
          entrance_criteria:
          - Delta approved
          - Existing --json pattern understood (create.py lines 58-79)
          - Standard JSON schema defined
          exit_criteria:
          - All create/list/show commands support --json
          - All tests passing (unit + integration)
          - Ruff and Pylint passing
          - ISSUE-007 resolved
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-006.PHASE-01
        plan: IP-006
        delta: DE-006
        objective: Add --json flag to create and list CLI commands with standardized
          output format
        entrance_criteria:
        - Delta DE-006 approved
        - Existing --json pattern understood (create.py lines 58-79)
        - Standard JSON schema defined
        exit_criteria:
        - All create subcommands (issue, problem, improvement, risk) support --json
        - List specs command supports --json shorthand
        - All tests passing (69 CLI tests)
        - Ruff and Pylint passing
        - ISSUE-007 resolved
        verification:
          tests:
          - test_create_issue_json_output
          - test_create_problem_json_output
          - test_create_risk_json_output
          evidence:
          - Git commit 8f388ea
          - All 69 CLI tests passing
          - Ruff 100% clean
          - Pylint 10/10 score
        tasks:
        - Add --json to create issue, problem, improvement, risk
        - Add --json shorthand to list specs
        - Write JSON output tests
        - Run full test suite
        - Resolve ISSUE-007
        risks:
        - Breaking text output (mitigated - --json is opt-in)
        - Inconsistent JSON schema (mitigated - standard format defined)
  DE-007:
    kind: delta
    status: completed
    name: Delta - Lifecycle coverage enforcement
    slug: lifecycle-coverage-enforcement
    updated: '2025-11-03'
    path: change/deltas/DE-007-lifecycle-coverage-enforcement/DE-007.md
    applies_to:
      specs:
      - PROD-008
      - PROD-009
      - SPEC-122
      requirements:
      - PROD-008.FR-001
      - PROD-008.FR-002
      - PROD-008.FR-003
      - PROD-009.FR-002
      - PROD-009.FR-003
    plan:
      id: IP-007
      overview: {}
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-007.PHASE-01
        plan: IP-007
        delta: DE-007
        objective: Wire verification coverage entries into the requirements registry
          lifecycle and emit drift warnings when coverage disagrees with audits or
          plans.
        entrance_criteria:
        - SPEC-122 guidance reviewed
        - Test fixtures for coverage-enabled specs identified
        exit_criteria:
        - Registry sync updates lifecycle fields from coverage status changes
        - Validation warning emitted for simulated spec vs audit/plan drift
        - VT-902 integration test passing
        verification:
          tests:
          - VT-902
          evidence:
          - Lifecycle sync logs
          - Validation warning output snapshot
        tasks:
        - Add coverage block extraction to registry sync
        - Implement lifecycle status aggregation logic
        - Add drift detection and warning emission
        - Create test fixtures with coverage blocks
        - Write comprehensive integration tests
        risks:
        - Registry regression affecting existing specs
        - Performance impact from additional parsing
      - schema: supekku.phase.overview
        version: 1
        phase: IP-007.PHASE-02
        plan: IP-007
        delta: DE-007
        objective: Enforce coverage hand-back in the delta completion workflow and
          document the updated process for agents.
        entrance_criteria:
        - Phase 01 exit criteria met
        - CLI fixtures prepared for completion workflow tests
        exit_criteria:
        - spec-driver complete delta blocks when coverage entries missing
        - RUN.md / CLAUDE command docs updated with enforcement guidance
        - VA-320 and VH-201 verification complete
        verification:
          tests:
          - VA-320
          - VH-201
          evidence:
          - CLI run log demonstrating enforcement messaging
          - Documentation change references
        tasks:
        - id: 2.1
          description: Add coverage completeness check function
          status: completed
        - id: 2.2
          description: Integrate check into delta completion workflow
          status: completed
        - id: 2.3
          description: Add --force flag for emergency overrides
          status: completed
        - id: 2.4
          description: Implement environment variable for feature toggle
          status: completed
        - id: 2.5
          description: Update RUN.md with coverage workflow
          status: completed
        - id: 2.6
          description: Update agent documentation
          status: completed
        - id: 2.7
          description: Create completion workflow tests
          status: completed
        risks:
        - Enforcement blocks legitimate emergency fixes
        - False positives for legacy specs without coverage
  DE-008:
    kind: delta
    status: completed
    name: Separate coverage evidence from audit verification
    slug: add-coverage-evidence
    updated: '2025-11-03'
    path: change/deltas/DE-008-add-coverage-evidence/DE-008.md
    applies_to:
      specs:
      - SPEC-122
      - SPEC-125
      requirements: []
    relations:
    - type: addresses
      target: ISSUE-012
      attributes:
        description: Separates coverage artifacts from verified_by field
    plan:
      id: IP-008
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-008
        delta: DE-008
        revision_links:
          aligns_with: []
        specs:
          primary:
          - SPEC-122
          collaborators:
          - SPEC-125
          - SPEC-120
        requirements:
          targets: []
          dependencies: []
        phases:
        - id: IP-008.PHASE-01
          name: Phase 01 - Schema & sync foundation
          objective: Add coverage_evidence field to RequirementRecord and update sync
            logic to populate it instead of verified_by for VT/VA/VH artifacts.
          entrance_criteria:
          - SPEC-122 guidance reviewed
          - Test fixtures identified
          exit_criteria:
          - RequirementRecord serialization includes coverage_evidence
          - Coverage sync populates coverage_evidence, not verified_by
          - Unit tests passing for schema and sync
          - Zero regressions
        - id: IP-008.PHASE-02
          name: Phase 02 - Validation & display
          objective: Implement validation warnings for coverage edge cases and update
            all display/formatting to distinguish coverage from audit verification.
          entrance_criteria:
          - Phase 01 exit criteria met
          exit_criteria:
          - Validation warnings trigger for coverage without baseline status
          - Validation warnings trigger for missing audits after grace period
          - CLI/JSON output shows both fields separately
          - All tests passing, linters clean
          - Documentation updated
        - id: IP-008.PHASE-02
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-008.PHASE-01
        plan: IP-008
        delta: DE-008
        objective: Add coverage_evidence field to RequirementRecord and update sync
          logic to populate it instead of verified_by for VT/VA/VH artifacts.
        entrance_criteria:
        - SPEC-122 guidance reviewed
        - Test fixtures identified
        exit_criteria:
        - RequirementRecord serialization includes coverage_evidence
        - Coverage sync populates coverage_evidence, not verified_by
        - Unit tests passing for schema and sync
        - Zero regressions
        verification:
          tests:
          - VT-910
          - VT-911
          evidence:
          - Test run output showing coverage_evidence serialization
          - Test run output showing sync logic
        tasks:
        - id: '1.1'
          description: Add coverage_evidence field to RequirementRecord dataclass
        - id: '1.2'
          description: Update RequirementRecord serialization methods
        - id: '1.3'
          description: Update coverage sync logic to populate coverage_evidence
        - id: '1.4'
          description: Write unit tests for schema changes
        - id: '1.5'
          description: Write unit tests for sync logic
        - id: '1.6'
          description: Run full test suite and verify zero regressions
        - id: '1.7'
          description: Lint and fix any issues
        risks:
        - description: Breaking existing code that accesses RequirementRecord
          mitigation: Comprehensive test coverage before changes
      - schema: supekku.phase.overview
        version: 1
        phase: IP-008.PHASE-02
        plan: IP-008
        delta: DE-008
        objective: Implement validation warnings for coverage edge cases and update
          all display/formatting to distinguish coverage from audit verification.
        entrance_criteria:
        - Phase 01 exit criteria met
        exit_criteria:
        - Validation warnings trigger for coverage without baseline status
        - Validation warnings trigger for missing audits after grace period
        - CLI/JSON output shows both fields separately
        - All tests passing, linters clean
        - Documentation updated
        verification:
          tests:
          - VT-912
          - VT-913
          - VT-914
          - VA-321
          - VH-202
          evidence:
          - Test run output showing validation warnings
          - CLI output showing coverage_evidence and verified_by separately
          - Updated documentation
        tasks:
        - id: '2.1'
          description: Add validation warnings for coverage without baseline status
        - id: '2.2'
          description: Add validation warnings for missing audits after grace period
        - id: '2.3'
          description: Update requirement formatters to display coverage_evidence
        - id: '2.4'
          description: Update CLI JSON output for coverage_evidence
        - id: '2.5'
          description: Write tests for validation warnings (VT-912, VT-913)
        - id: '2.6'
          description: Write tests for formatter updates
        - id: '2.7'
          description: Run integration test for complete workflow (VT-914)
        - id: '2.8'
          description: Update glossary documentation
        - id: '2.9'
          description: Run full test suite and lint
        risks:
        - description: Validation warning thresholds may be unclear
          mitigation: Use 30-day default for grace period, make configurable
  DE-009:
    kind: delta
    status: completed
    name: Delta - CLI JSON consistency fixes
    slug: cli-json-consistency-fixes
    updated: '2025-11-03'
    path: change/deltas/DE-009-cli-json-consistency-fixes/DE-009.md
    applies_to:
      specs:
      - SPEC-110
      requirements:
      - PROD-010.FR-001
      - PROD-010.FR-002
      - PROD-010.FR-003
      - PROD-010.NF-003
    plan:
      id: IP-009
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-009
        delta: DE-009
        revision_links:
          aligns_with: []
        specs:
          primary:
          - SPEC-110
          collaborators:
          - SPEC-120
        requirements:
          targets:
          - PROD-010.FR-001
          - PROD-010.FR-002
          - PROD-010.FR-003
          - PROD-010.NF-003
          dependencies: []
        phases:
        - id: IP-009.PHASE-01
          name: Phase 01 - CLI JSON Consistency Fixes
          objective: 'Implement Priority 1 CLI consistency fixes: standardize --json
            flag across all list/show commands, add status filter to specs, ensure
            backward compatibility, and validate against UX research findings.'
          entrance_criteria:
          - Development environment set up with uv and dependencies installed
          - Existing CLI test suite passing
          - Both linters passing
          - Familiarity with CLAUDE.md skinny CLI patterns
          - UX research report reviewed
          exit_criteria:
          - All list commands support both --json and --format=json flags
          - All show commands support --json flag
          - list specs command supports -s/--status filter
          - All unit tests passing with new test coverage
          - Both linters passing with zero warnings
          - Help text updated and accurate
          - JSON output schemas validated as stable
          - Manual agent workflow testing confirms consistency improvements
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-009.PHASE-01
        plan: IP-009
        delta: DE-009
        objective: 'Implement Priority 1 CLI consistency fixes: standardize --json
          flag across all list/show commands, add status filter to specs, ensure backward
          compatibility, and validate against UX research findings.'
        entrance_criteria:
        - Development environment set up with uv and dependencies installed
        - Existing CLI test suite passing (just test)
        - Both linters passing (just lint, just pylint)
        - Familiarity with CLAUDE.md skinny CLI patterns and formatter separation
        - UX research report reviewed (docs/ux-research-cli-2025-11-03.md)
        exit_criteria:
        - All list commands support both --json and --format=json flags
        - All show commands support --json flag with documented behavior
        - list specs command supports -s/--status filter matching other commands
        - All unit tests passing with new test coverage for changes
        - Both linters passing with zero warnings
        - Help text updated and accurate for all modified commands
        - JSON output schemas validated as stable (no breaking changes)
        - Manual agent workflow testing confirms consistency improvements
        verification:
          tests:
          - VT-CLI-JSON-CONSISTENCY
          - VT-CLI-STATUS-SPECS
          - VT-CLI-REGRESSION
          evidence:
          - VT-PROD010-JSON-001
          - VT-PROD010-JSON-002
          - VT-PROD010-FILTER-001
          - VH-PROD010-UX-001
        tasks:
        - id: '1.1'
          description: Research existing JSON flag implementations and status filtering
            patterns
          status: pending
        - id: '1.2'
          description: Write tests for --json flag on all list commands (TDD)
          status: pending
        - id: '1.3'
          description: Implement --json shorthand for list commands (deltas, adrs,
            requirements, revisions, changes)
          status: pending
        - id: '1.4'
          description: Write tests for --json flag on show commands (TDD)
          status: pending
        - id: '1.5'
          description: Implement --json support for show commands (spec, delta, adr,
            requirement, revision)
          status: pending
        - id: '1.6'
          description: Write tests for status filter on specs command (TDD)
          status: pending
        - id: '1.7'
          description: Implement status filter for list specs command
          status: pending
        - id: '1.8'
          description: Update help text for all modified commands
          status: pending
        - id: '1.9'
          description: Run full test suite and linters, fix any issues
          status: pending
        - id: '1.10'
          description: Manual validation against UX research Priority 1 findings
          status: pending
        risks:
        - description: Breaking changes to JSON schemas disrupt agent workflows
          likelihood: low
          impact: high
          mitigation: Comprehensive regression tests validate schema stability before
            and after changes
        - description: Status filter implementation differs from other commands
          likelihood: medium
          impact: medium
          mitigation: Reuse exact patterns from list_deltas; test for behavioral parity
  DE-010:
    kind: delta
    status: draft
    name: Delta - Policy and Standard Management
    slug: policy-and-standard-management
    updated: '2025-11-03'
    path: change/deltas/DE-010-policy-and-standard-management/DE-010.md
    applies_to:
      specs:
      - PROD-003
      requirements:
      - PROD-003.FR-001
      - PROD-003.FR-002
      - PROD-003.FR-003
      - PROD-003.FR-004
      - PROD-003.FR-005
      - PROD-003.FR-006
      - PROD-003.FR-007
      - PROD-003.FR-008
      - PROD-003.NF-001
      - PROD-003.NF-002
    plan:
      id: IP-010
      overview:
        schema: supekku.plan.overview
        version: 1
        plan: IP-010
        delta: DE-010
        revision_links:
          aligns_with: []
        specs:
          primary:
          - PROD-003
          collaborators: []
        requirements:
          targets:
          - PROD-003.FR-001
          - PROD-003.FR-002
          - PROD-003.FR-003
          - PROD-003.FR-004
          - PROD-003.FR-005
          - PROD-003.FR-006
          - PROD-003.FR-007
          - PROD-003.FR-008
          - PROD-003.NF-001
          - PROD-003.NF-002
          dependencies: []
        phases:
        - id: IP-010.PHASE-01
          name: Phase 01 - Foundation & Domain Models
          objective: Create domain packages (policies/, standards/) with models, registry,
            and creation logic mirroring the proven decisions/ package architecture.
          entrance_criteria:
          - Delta approved and PROD-003 reviewed
          - Decisions package structure understood (SPEC-117 reference)
          - Template structure defined
          exit_criteria:
          - PolicyRecord and StandardRecord models implemented
          - PolicyRegistry and StandardRegistry with YAML serialization
          - Creation functions with ID generation and frontmatter building
          - Unit tests passing for all domain logic
          - Lint checks passing
        - id: IP-010.PHASE-02
          name: Phase 02 - Formatters & Display
          objective: Implement pure formatting functions for policies and standards
            following established formatter patterns.
          entrance_criteria: &id005
          - Phase 01 complete (domain models available)
          - Formatter patterns reviewed (decision_formatters.py reference)
          exit_criteria: &id006
          - policy_formatters.py with table/JSON/TSV output functions
          - standard_formatters.py with status-aware formatting
          - Comprehensive formatter tests covering edge cases
          - Formatters exported in __init__.py
          - Lint checks passing
        - id: IP-010.PHASE-03
          name: Phase 03 - CLI Integration
          objective: Add CLI commands (create, list, show) for policies and standards,
            extending existing CLI infrastructure.
          entrance_criteria: &id007
          - Phase 02 complete (formatters available)
          - CLI architecture reviewed (SPEC-110 reference)
          exit_criteria: &id008
          - spec-driver create policy/standard commands
          - spec-driver list policies/standards with filtering
          - spec-driver show policy/standard with full details
          - CLI help text and documentation complete
          - Integration tests for all CLI workflows
          - Lint checks passing
        - id: IP-010.PHASE-04
          name: Phase 04 - Cross-References & Backlinks
          objective: Implement bidirectional cross-references between policies, standards,
            and ADRs with automatic backlink maintenance.
          entrance_criteria: &id009
          - Phase 03 complete (CLI functional)
          - ADR frontmatter schema extensible
          exit_criteria: &id010
          - ADR frontmatter extended with policies and standards fields
          - Backlink generation in registry sync
          - Cross-reference validation
          - Integration tests for bidirectional navigation
          - Lint checks passing
        - id: IP-010.PHASE-05
          name: Phase 05 - Verification & Documentation
          objective: Complete E2E testing, update documentation, and verify all acceptance
            criteria.
          entrance_criteria: &id011
          - Phase 04 complete (full feature set implemented)
          - All unit and integration tests passing
          exit_criteria: &id012
          - "E2E tests for complete workflows (create \u2192 reference \u2192 show\
            \ backlinks)"
          - All VT-PROD-003-* tests implemented and passing
          - VA-PROD-003-001 UX review complete
          - README updated with policy/standard examples
          - All acceptance criteria verified
          - just test, just lint, just pylint all passing
      phases:
      - schema: supekku.phase.overview
        version: 1
        phase: IP-010.PHASE-01
        plan: IP-010
        delta: DE-010
        objective: Create domain packages (policies/, standards/) with models, registry,
          and creation logic mirroring the proven decisions/ package architecture.
        entrance_criteria:
        - Delta DE-010 approved and PROD-003 reviewed
        - Decisions package structure understood (SPEC-117 reference)
        - Template structure defined
        exit_criteria:
        - PolicyRecord and StandardRecord models implemented
        - PolicyRegistry and StandardRegistry with YAML serialization
        - Creation functions with ID generation and frontmatter building
        - Unit tests passing for all domain logic
        - Lint checks passing (just lint, just pylint)
        verification:
          tests:
          - VT-PROD-003-001 - E2E test for policy creation
          - VT-PROD-003-002 - Integration test for policy lifecycle
          - VT-PROD-003-003 - E2E test for standard creation
          - VT-PROD-003-004 - Unit test for default status behavior
          evidence:
          - Test run output showing all unit tests passing
          - Lint checks passing (ruff + pylint)
          - Registry YAML files generated correctly
        tasks:
        - id: '1.1'
          description: Research decisions package architecture
        - id: '1.2'
          description: Create policies/ package structure
        - id: '1.3'
          description: Create standards/ package structure
        - id: '1.4'
          description: Implement PolicyRecord and StandardRecord models
        - id: '1.5'
          description: Implement PolicyRegistry with YAML serialization
        - id: '1.6'
          description: Implement StandardRegistry with YAML serialization
        - id: '1.7'
          description: Implement policy creation with ID generation
        - id: '1.8'
          description: Implement standard creation with ID generation
        - id: '1.9'
          description: Create policy and standard templates
        - id: '1.10'
          description: Write comprehensive unit tests
        - id: '1.11'
          description: Lint and validate all code
        risks:
        - description: Decisions package may use internal APIs not suitable for reuse
          mitigation: Extract patterns, not code; implement independently if needed
        - description: Template structure may need iteration
          mitigation: Start with PROD-003 spec; refine based on actual usage
      - id: IP-010.PHASE-02
        name: Phase 02 - Formatters & Display
        objective: Implement pure formatting functions for policies and standards
          following established formatter patterns.
        entrance_criteria: *id005
        exit_criteria: *id006
        phase: IP-010.PHASE-02
      - id: IP-010.PHASE-03
        name: Phase 03 - CLI Integration
        objective: Add CLI commands (create, list, show) for policies and standards,
          extending existing CLI infrastructure.
        entrance_criteria: *id007
        exit_criteria: *id008
        phase: IP-010.PHASE-03
      - id: IP-010.PHASE-04
        name: Phase 04 - Cross-References & Backlinks
        objective: Implement bidirectional cross-references between policies, standards,
          and ADRs with automatic backlink maintenance.
        entrance_criteria: *id009
        exit_criteria: *id010
        phase: IP-010.PHASE-04
      - id: IP-010.PHASE-05
        name: Phase 05 - Verification & Documentation
        objective: Complete E2E testing, update documentation, and verify all acceptance
          criteria.
        entrance_criteria: *id011
        exit_criteria: *id012
        phase: IP-010.PHASE-05
