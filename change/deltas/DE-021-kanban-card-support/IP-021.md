---
id: IP-021
slug: kanban-card-support
name: Implementation Plan - Card support (kanban board)
created: '2026-02-03'
updated: '2026-02-03'
status: draft
kind: plan
aliases: []
---

```yaml supekku:plan.overview@v1
schema: supekku.plan.overview
version: 1
plan: IP-021
delta: DE-021
revision_links:
  aligns_with: []
specs:
  primary: []
  collaborators: []
requirements:
  targets: []
  dependencies: []
phases:
- id: IP-021.PHASE-01
- id: IP-021.PHASE-02
- id: IP-021.PHASE-03
- id: IP-021.PHASE-01
- id: IP-021.PHASE-02
- id: IP-021.PHASE-03
```

```yaml supekku:verification.coverage@v1
schema: supekku.verification.coverage
version: 1
subject: IP-021
entries:
  - artefact: VT-021-001
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: ID parsing + lane detection + ambiguity rules
  - artefact: VT-021-002
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: next-ID allocation scans all lanes
  - artefact: VT-021-003
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: create card copies template and rewrites only H1/Created
  - artefact: VT-021-004
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: `show card -q` path-only behaviour and errors
  - artefact: VT-021-005
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: `find card` repo-wide filename matching
  - artefact: VT-021-006
    kind: VT
    requirement: internal
    phase: IP-021.PHASE-02
    status: planned
    notes: `list cards` output formats (table/json/tsv)
  - artefact: VH-021-001
    kind: VH
    requirement: internal
    phase: IP-021.PHASE-03
    status: planned
    notes: manual UX sanity (create/list/show/find)
```

## 1. Summary
- **Delta**: DE-021 – Card support (kanban board)
- **Specs Impacted**: None (internal tooling improvement)
- **Backlog Driver**: IMPR-003 – `backlog/improvements/IMPR-003-kanban-support/IMPR-003.md`
- **Decision Context**: ADR-001 – `specify/decisions/ADR-001-use-spec-driver-to-build-spec-driver.md`
- **Desired Outcome**: First-class `card` artifact support with create/list/show/find commands and robust ID→path resolution.

## 2. Context & Constraints
- **Current Behaviour**: Cards exist as Markdown files under `kanban/`, with no SpecDriver artifact support.
- **Target Behaviour**: CLI supports `card` workflows while keeping metadata minimal and resilient to folder moves.
- **Dependencies**: None.
- **Constraints**:
  - Preserve thin CLI pattern and SRP.
  - Template remains user-controlled; rewrite only H1 + `Created:`.
  - Avoid premature abstractions and keep parsing tolerant.

## 3. Gate Check
- [x] Backlog item linked (IMPR-003)
- [x] Delta specifies required changes (internal tooling; no SPEC/PROD requirement targets)
- [x] Test strategy identified (domain + formatter + CLI tests; see section 6)
- [ ] Workspace/config changes assessed (confirm whether `spec-driver install` should create `kanban/template.md` in future)


> Tip: Plan phases up front, then create the phase sheet for the current phase only. Update later phases when you are ready to execute them.

## 4. Phase Overview
| Phase | Objective | Entrance Criteria | Exit Criteria / Done When | Phase Sheet |
| --- | --- | --- | --- | --- |
| Phase 1 - Design Lock | Confirm patterns + lock CLI behaviors | Delta exists, IMPR reviewed | DR/IP updated, tests identified, ready to implement | `phases/phase-01.md` *(create when ready)* |
| Phase 2 - Implementation | Implement domain + CLI + tests | Phase 1 complete, design approved | All VT artefacts passing, linters passing | `phases/phase-02.md` *(create when ready)* |
| Phase 3 - Verification & Polish | Manual sanity + docs tidy | Phase 2 complete | VH complete, help text/docs aligned, delta ready to complete | `phases/phase-03.md` *(create when ready)* |

*Adjust/add phases as needed; every phase must have clear gates. Create phase sheets just-in-time via `uv run spec-driver create phase --plan IP-021`.*

## 5. Phase Detail Snapshot
- **Research Notes**: `change/deltas/DE-021-kanban-card-support/notes.md`
- **Design Revision**: `change/deltas/DE-021-kanban-card-support/DR-021.md`
- **Active Phase Sheet**: *(not created yet)* — create when ready via `uv run spec-driver create phase --plan IP-021`
- **Parallelisable Work**: Flag tasks with `[P]` inside phase sheets
- **Plan Updates**: Update this plan when phase outcomes change (new risks, scope adjustments)

## 6. Testing & Verification Plan
**Primary tests to add/update**
- Domain: `supekku/scripts/lib/cards/registry_test.py` (VT-021-001..003)
- Formatters: `supekku/scripts/lib/formatters/card_formatters_test.py` (VT-021-006)
- CLI: extend `supekku/cli/list_test.py`, `supekku/cli/show_test.py`, and/or `supekku/cli/test_cli.py`
  to cover `show card -q`, `find card`, and basic `create card` wiring (VT-021-004..006).

**Key scenarios**
- ID parsing from filename; lane detection when under `kanban/<lane>/`.
- `show card` default scope (`kanban/**`) + `--anywhere`.
- Ambiguity handling: multiple matches must error and list candidates.
- Template rewrite safety: only H1 + `Created:` updated.
- `find card` matches repo-wide filenames `^T123-.*\\.md$`.
- Output formats: table/json/tsv stable and machine-readable where applicable.

**Verification Coverage**
Cross-check `supekku:verification.coverage@v1` entries (VT-021-001..006, VH-021-001) against phase tasks before closing delta.

## 7. Risks & Mitigations
| Risk | Mitigation | Owner |
| --- | --- | --- |
| Ambiguous matches across repo | Fail loudly; print candidates; require `--anywhere` explicitly | Dev |
| Template rewrite too invasive | Rewrite only H1 + `Created:`; test with template variants | Dev |
| Lane variations beyond backlog/doing/done | Keep lane parsing best-effort; lane is derived, not required | Dev |

## 8. Open Questions & Decisions
- [ ] Should `spec-driver install` create `kanban/template.md` by default? If not, creation must error clearly when template missing.
- [ ] Should we parse optional `Depends:`/`Related:` links in v1, or defer until after core commands land?

## 9. Progress Tracking
- [ ] Phase 1 complete
- [ ] Phase 2 complete
- [ ] Phase 3 complete
- [ ] Verification gates passed

## 10. Notes / Links
- Driver: `backlog/improvements/IMPR-003-kanban-support/IMPR-003.md`
- Decision: `specify/decisions/ADR-001-use-spec-driver-to-build-spec-driver.md`
- Delta: `change/deltas/DE-021-kanban-card-support/DE-021.md`
```
