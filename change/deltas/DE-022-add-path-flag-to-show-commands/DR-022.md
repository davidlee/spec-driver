---
id: DR-022
slug: add-path-flag-to-show-commands
name: Design Revision - Add --path flag to show commands
created: '2026-02-04'
updated: '2026-02-04'
status: draft
kind: design_revision
aliases: []
owners: []
relations:
- type: implements
  target: DE-022
delta_ref: DE-022
source_context:
  - supekku/cli/show.py
code_impacts:
  - path: supekku/cli/show.py
    current: show_* functions lack --path flag; show_card lacks --json
    target: All show functions support --path and --json consistently
verification_alignment:
  - id: VT-022-001
    impact: new
    notes: Test --path flag on all show subcommands
  - id: VT-022-002
    impact: new
    notes: Test --json flag on show card
design_decisions:
  - id: DEC-022-01
    summary: Use --path (not -p) as primary flag, keep -q as alias for show card
open_questions: []
---

# DR-022 – Add --path flag to show commands

## 1. Executive Summary

- **Delta**: [DE-022](./DE-022.md)
- **Status**: draft
- **Last Updated**: 2026-02-04
- **Synopsis**: Add `--path` flag to all `show` subcommands for shell composability

## 2. Problem & Constraints

- **Current Behaviour**:
  - `show card` has `-q/--quiet` for path output, but no `--json`
  - Other `show` commands have `--json` but no path-only output
  - Users must parse JSON to extract paths, or navigate manually

- **Drivers / Inputs**: PROD-013 CLI audit identified inconsistent flag support

- **Constraints / Guardrails**:
  - Maintain backward compatibility (`-q` must keep working)
  - Flag names must be consistent across commands

- **Out of Scope**: `--raw` flag, `view`/`edit` commands

## 3. Architecture Intent

- **Target Outcomes**:
  - FR-001: All show commands support `--path`
  - FR-006: All show commands support `--json`
  - FR-007: JSON output includes `path` field

- **Guiding Principles**:
  - Flags are mutually exclusive: `--path`, `--json`, or default (formatted)
  - Path output is a single line, no trailing content
  - Use existing registry path resolution

## 4. Code Impact Summary

| Path | Current State | Target State |
| --- | --- | --- |
| `supekku/cli/show.py:show_spec` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_delta` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_revision` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_requirement` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_adr` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_policy` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_standard` | `--json`, `--root` | + `--path` |
| `supekku/cli/show.py:show_card` | `-q/--quiet`, `--root` | + `--json`, rename to `--path/-p` (keep `-q` alias) |

## 5. Verification Alignment

| Verification | Impact | Notes |
| --- | --- | --- |
| VT-022-001 | new | Test `--path` on all show subcommands |
| VT-022-002 | new | Test `--json` on show card |

## 6. Supporting Context

- **Related Specs**: PROD-013 – CLI Artifact File Access

## 7. Design Decisions & Trade-offs

**DEC-022-01: Flag naming**
- Decision: Use `--path` as primary flag name across all commands
- Rationale: More descriptive than `-q/--quiet`; consistent with `--json`
- Consequence: `show card` gains `--path/-p` in addition to existing `-q` alias

**DEC-022-02: Mutual exclusivity**
- Decision: `--path` and `--json` are mutually exclusive
- Rationale: Clear output modes; avoid ambiguity
- Implementation: Early check, error if both provided

## 8. Open Questions

None - design is straightforward.

## 9. Rollout & Operational Notes

- **Migration**: `-q` remains as alias, no breaking changes
- **Observability**: N/A (CLI tool)
- **Recovery**: N/A

## 10. Implementation Pattern

```python
# Add to each show_* function signature:
path_only: Annotated[
  bool,
  typer.Option("--path", "-p", help="Print only the file path"),
] = False,

# Add early in function body:
if path_only and json_output:
  typer.echo("Error: --path and --json are mutually exclusive", err=True)
  raise typer.Exit(EXIT_FAILURE)

# Add output branch:
if path_only:
  typer.echo(artifact.path)  # or equivalent
  raise typer.Exit(EXIT_SUCCESS)
```

For `show_card`, add `--json` option following the same pattern as other show commands:
```python
if json_output:
  typer.echo(json.dumps(card.to_dict(), indent=2))
  raise typer.Exit(EXIT_SUCCESS)
```
