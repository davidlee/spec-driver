---
id: IP-022
slug: add-path-flag-to-show-commands
name: Implementation Plan - Add --path flag to show commands
created: '2026-02-04'
updated: '2026-02-04'
status: draft
kind: plan
aliases: []
---

```yaml supekku:plan.overview@v1
schema: supekku.plan.overview
version: 1
plan: IP-022
delta: DE-022
revision_links:
  aligns_with:
  - DR-022
specs:
  primary:
  - PROD-013
  collaborators: []
requirements:
  targets:
  - PROD-013.FR-001
  - PROD-013.FR-006
  - PROD-013.FR-007
  dependencies: []
phases:
- id: IP-022-P01
- id: IP-022.PHASE-01
```

```yaml supekku:verification.coverage@v1
schema: supekku.verification.coverage
version: 1
subject: IP-022
entries:
  - artefact: VT-022-001
    kind: VT
    requirement: PROD-013.FR-001
    status: planned
    notes: Test --path flag on all show subcommands
  - artefact: VT-022-002
    kind: VT
    requirement: PROD-013.FR-006
    status: planned
    notes: Test --json flag on show card
```

## 1. Summary

- **Delta**: DE-022 - Add --path flag to show commands
- **Specs Impacted**: PROD-013 (CLI Artifact File Access)
- **Desired Outcome**: All `show` subcommands support `--path` and `--json` flags consistently

## 2. Context & Constraints

- **Current Behaviour**: Inconsistent flag support (see DR-022 Section 4)
- **Target Behaviour**: PROD-013.FR-001, FR-006, FR-007
- **Dependencies**: None
- **Constraints**: Backward compatibility for `-q` flag on `show card`

## 3. Gate Check

- [x] Spec created and linked (PROD-013)
- [x] Design revision complete (DR-022)
- [x] Test strategy identified (unit tests in show_test.py)
- [ ] Implementation complete

## 4. Phase Overview

| Phase | Objective | Entrance Criteria | Exit Criteria | Phase Sheet |
| --- | --- | --- | --- | --- |
| Phase 1 | Implement --path and --json flags | DR-022 approved | Tests passing, lint clean | `phases/phase-01.md` |

Single-phase implementation - scope is small and well-defined.

## 5. Phase Detail Snapshot

- **Design Revision**: [DR-022](./DR-022.md)
- **Active Phase Sheet**: `phases/phase-01.md` (to be created)

## 6. Testing & Verification Plan

- **Updated Suites**: `supekku/cli/show_test.py`
- **New Cases**:
  - Test `--path` on each show subcommand
  - Test `--json` on `show card`
  - Test mutual exclusivity of `--path` and `--json`
  - Test `-q` alias still works for `show card`

## 7. Risks & Mitigations

| Risk | Mitigation | Owner |
| --- | --- | --- |
| Breaking `-q` behavior | Keep as alias | Dev |

## 8. Open Questions & Decisions

None - straightforward implementation.

## 9. Progress Tracking

- [ ] Phase 1 complete
- [ ] Verification gates passed

## 10. Implementation Tasks

### Phase 1 Tasks

1. **Add `--path` flag to show commands** (7 functions)
   - `show_spec`, `show_delta`, `show_revision`, `show_requirement`
   - `show_adr`, `show_policy`, `show_standard`

2. **Update `show_card`**
   - Add `--json` flag
   - Rename `--quiet` to `--path` (keep `-q` as alias)

3. **Add mutual exclusivity check**
   - Error if both `--path` and `--json` provided

4. **Write tests**
   - Test `--path` output for each command
   - Test `--json` on `show card`
   - Test error on `--path --json`

5. **Lint and verify**
   - `just lint`
   - `just test`
