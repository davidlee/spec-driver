---
id: DR-024
slug: add-raw-flag-to-show-commands
name: Design Revision - Add --raw flag to show commands
created: '2026-02-05'
updated: '2026-02-05'
status: approved
kind: design_revision
aliases: []
owners: []
relations:
- type: implements
  target: DE-024
delta_ref: DE-024
source_context:
- supekku/cli/show.py
code_impacts:
- path: supekku/cli/show.py
  description: Add --raw flag to all show subcommands
verification_alignment:
- id: VT-002
  impact: new
  notes: Test --raw outputs raw file content
design_decisions:
- id: DEC-024-001
  summary: --raw outputs file content unchanged, mutually exclusive with --json and --path
open_questions: []
---

# DR-024 â€“ Add --raw flag to show commands

## 1. Executive Summary
- **Delta**: [DE-024](./DE-024.md)
- **Status**: approved
- **Last Updated**: 2026-02-05
- **Synopsis**: Add `--raw` flag to all show subcommands to output raw file content for piping/scripting.

## 2. Problem & Constraints
- **Current Behaviour**: `show` commands output formatted details or JSON; no way to get raw file content
- **Drivers / Inputs**: PROD-013.FR-002 - raw output for scripting/piping workflows
- **Constraints / Guardrails**:
  - Must be mutually exclusive with `--json` and `--path`
  - Must output content exactly as stored (no formatting)
- **Out of Scope**: Binary file handling (all artifacts are text/markdown)

## 3. Architecture Intent
- **Target Outcomes**:
  - `spec-driver show adr ADR-001 --raw` outputs raw markdown content
  - Content suitable for piping: `spec-driver show spec SPEC-001 --raw | grep "FR-"`
- **Guiding Principles**: Consistent flag behavior across all show subcommands
- **State Transitions / Lifecycle Impact**: None - read-only operation

## 4. Code Impact Summary
| Path | Current State | Target State |
| --- | --- | --- |
| `supekku/cli/show.py` | show_spec, show_delta, etc. support --json, --path | Add --raw flag to all subcommands |

## 5. Verification Alignment
| Verification | Impact | Notes |
| --- | --- | --- |
| VT-002 | new | Test --raw outputs raw file content unchanged |

## 6. Supporting Context
- **Related Deltas**: DE-022 (added --path flag, same pattern)
- **Specs**: PROD-013 - CLI Artifact File Access

## 7. Design Decisions & Trade-offs
- DEC-024-001: `--raw` reads file and outputs content directly via `typer.echo(path.read_text())`
- Mutual exclusivity: `--raw`, `--json`, `--path` are all mutually exclusive (only one output mode)

## 8. Open Questions
None.

## 9. Rollout & Operational Notes
- No migration needed - additive feature
- No observability changes

## 10. Implementation Pattern

```python
@app.command("spec")
def show_spec(
  spec_id: Annotated[str, typer.Argument(...)],
  json_output: Annotated[bool, typer.Option("--json", ...)] = False,
  path_only: Annotated[bool, typer.Option("--path", ...)] = False,
  raw_output: Annotated[bool, typer.Option("--raw", help="Output raw file content")] = False,
  root: RootOption = None,
) -> None:
  # Mutual exclusivity check
  if sum([json_output, path_only, raw_output]) > 1:
    typer.echo("Error: --json, --path, and --raw are mutually exclusive", err=True)
    raise typer.Exit(EXIT_FAILURE)

  # ... resolve artifact ...

  if raw_output:
    typer.echo(spec.path.read_text())
  elif path_only:
    typer.echo(spec.path)
  elif json_output:
    # ... existing JSON logic ...
  else:
    # ... existing formatted output ...
```
