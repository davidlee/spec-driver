---
id: DR-025
slug: extend-find-command-to-all-artifact-types
name: Design Revision - Extend find command to all artifact types
created: '2026-02-05'
updated: '2026-02-05'
status: approved
kind: design_revision
aliases: []
owners: []
relations:
- type: implements
  target: DE-025
delta_ref: DE-025
source_context:
- supekku/cli/find.py
code_impacts:
- path: supekku/cli/find.py
  description: Add subcommands for spec, delta, adr, revision, requirement, policy, standard
verification_alignment:
- id: VT-005
  impact: new
  notes: Test find subcommands for all artifact types
design_decisions:
- id: DEC-025-001
  summary: Find subcommands mirror show subcommands, output paths for matching artifacts
open_questions: []
---

# DR-025 â€“ Extend find command to all artifact types

## 1. Executive Summary
- **Delta**: [DE-025](./DE-025.md)
- **Status**: approved
- **Last Updated**: 2026-02-05
- **Synopsis**: Add find subcommands for all artifact types (spec, delta, adr, revision, policy, standard) to enable artifact path lookup.

## 2. Problem & Constraints
- **Current Behaviour**: `find` only supports `card` subcommand
- **Drivers / Inputs**: PROD-013.FR-005 - find command must support all artifact types
- **Constraints / Guardrails**:
  - Output paths only (for scripting)
  - Support glob/regex patterns for ID matching
- **Out of Scope**: Full-text search within files

## 3. Architecture Intent
- **Target Outcomes**:
  - `spec-driver find spec SPEC-*` outputs paths matching pattern
  - `spec-driver find adr ADR-001` outputs ADR path
  - `spec-driver find delta DE-02*` outputs matching delta paths
- **Guiding Principles**: Consistent with existing `find card` behavior
- **State Transitions / Lifecycle Impact**: None - read-only operation

## 4. Code Impact Summary
| Path | Current State | Target State |
| --- | --- | --- |
| `supekku/cli/find.py` | Only `find card` subcommand | Add: spec, delta, adr, revision, requirement, policy, standard |

## 5. Verification Alignment
| Verification | Impact | Notes |
| --- | --- | --- |
| VT-005 | new | Test find subcommands for all artifact types |

## 6. Supporting Context
- **Related Deltas**: DE-022, DE-023 (similar pattern with registries)
- **Specs**: PROD-013 - CLI Artifact File Access

## 7. Design Decisions & Trade-offs
- DEC-025-001: Each find subcommand uses its registry to list artifacts, filters by ID pattern, outputs paths
- Pattern matching: Support fnmatch-style patterns (*, ?) for flexible searching

## 8. Open Questions
None.

## 9. Rollout & Operational Notes
- No migration needed - additive feature
- No observability changes

## 10. Implementation Pattern

```python
@app.command("spec")
def find_spec(
  pattern: Annotated[str, typer.Argument(help="Spec ID pattern (e.g., SPEC-*, PROD-01*)")],
  root: RootOption = None,
) -> None:
  """Find specs matching ID pattern."""
  import fnmatch

  registry = SpecRegistry(root=root)
  for spec in registry.all_specs():
    if fnmatch.fnmatch(spec.id, pattern) or fnmatch.fnmatch(spec.id, pattern.upper()):
      typer.echo(spec.path)

@app.command("adr")
def find_adr(
  pattern: Annotated[str, typer.Argument(help="ADR ID pattern (e.g., ADR-*, ADR-00*)")],
  root: RootOption = None,
) -> None:
  """Find ADRs matching ID pattern."""
  import fnmatch

  registry = DecisionRegistry(root=root)
  for decision in registry.all_decisions():
    if fnmatch.fnmatch(decision.id, pattern) or fnmatch.fnmatch(decision.id, pattern.upper()):
      typer.echo(decision.path)

# Similar pattern for delta, revision, policy, standard
```
